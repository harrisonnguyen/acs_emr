<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Heart Failure Inpatient Analysis â€¢ acs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Heart Failure Inpatient Analysis">
<meta property="og:description" content="acs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">acs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/acs_procedures.html">The 'Cath Lab' and ICD10 Procedures</a>
    </li>
    <li>
      <a href="../articles/heartfailure_prelim.html">Heart Failure Inpatient Analysis</a>
    </li>
    <li>
      <a href="../articles/snomed_icd10_stemi.html">ICD10 SNOMED Concordance</a>
    </li>
    <li>
      <a href="../articles/validating_acs.html">Defining ACS Cohort for Clinical Indicator Dashboard</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="heartfailure_prelim_files/header-attrs-2.7/header-attrs.js"></script><script src="heartfailure_prelim_files/kePrint-0.0.1/kePrint.js"></script><link href="heartfailure_prelim_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Heart Failure Inpatient Analysis</h1>
                        <h4 class="author">Harrison Nguyen</h4>
            
            <h4 class="date">25/06/2021</h4>
      
      
      <div class="hidden name"><code>heartfailure_prelim.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/targets/">targets</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/">ggpubr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.sydney.edu.au/speed-extract/acs">acs</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"R/definitions.R"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="va">hf_journey</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_journey</span><span class="op">)</span>
<span class="va">hf_journey_demo_prep</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_journey_demo_prep</span><span class="op">)</span>

<span class="va">hf_discharge_letter_keys</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_discharge_letter_keys</span><span class="op">)</span>

<span class="va">hf_journey_meds_admit_discharge</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_journey_meds_admit_discharge</span><span class="op">)</span>
<span class="va">hf_meds_discharge_sum</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_meds_discharge_sum</span><span class="op">)</span></code></pre></div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This document will examine the inpatient journeys of patients who were designated a heart failure related ICD-10 code. For instance, there will be a characterisation of the cohort in terms of their demographics, as well as the proportion that were discharged with specific medications and had undergone specific investigations and/or procedures.</p>
</div>
<div id="cohort" class="section level1">
<h1 class="hasAnchor">
<a href="#cohort" class="anchor"></a>Cohort</h1>
<p>The cohort under analysis are patient journeys that were designated the following ICD10 codes as a primary diagnosis:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="../reference/hf_icd_codes.html">hf_icd_codes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
codes
</th>
<th style="text-align:left;">
names
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
I50.0
</td>
<td style="text-align:left;">
Heart failure
</td>
</tr>
<tr>
<td style="text-align:left;">
I50.1
</td>
<td style="text-align:left;">
Left venctricular failure, unspecified
</td>
</tr>
<tr>
<td style="text-align:left;">
I50.9
</td>
<td style="text-align:left;">
Heart failure, unspecified
</td>
</tr>
<tr>
<td style="text-align:left;">
U82.2
</td>
<td style="text-align:left;">
Chronic heart failure
</td>
</tr>
<tr>
<td style="text-align:left;">
I11.0
</td>
<td style="text-align:left;">
Hypertensive heart disease with heart failure
</td>
</tr>
<tr>
<td style="text-align:left;">
I13.0
</td>
<td style="text-align:left;">
Hypertensive heart and chronic kidney disease with heart failure and stage 1 through stage 4 chronic kidney disease, or unspecified chronic kidney disease
</td>
</tr>
<tr>
<td style="text-align:left;">
I13.2
</td>
<td style="text-align:left;">
Hypertensive heart and chronic kidney disease with heart failure and with stage 5 chronic kidney disease, or end stage renal disease
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">facility_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Royal North Shore"</span><span class="op">)</span>
<span class="va">cohort_journey_keys</span> <span class="op">&lt;-</span> <span class="va">hf_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span>  <span class="va">facility_list</span>, <span class="va">DIAGNOSIS_IMPORTANCE</span> <span class="op">==</span> <span class="st">"primary_diagnosis"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>

<span class="va">primary_journey</span> <span class="op">&lt;-</span> <span class="va">hf_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">primary_journey_demo</span> <span class="op">&lt;-</span><span class="va">hf_journey_demo_prep</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">primary_meds</span> <span class="op">&lt;-</span><span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">primary_meds_sum</span> <span class="op">&lt;-</span> <span class="va">hf_meds_discharge_sum</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_journeys</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">primary_journey</span><span class="op">$</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>
<span class="va">n_encounters</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">primary_journey</span><span class="op">$</span><span class="va">ENCNTR_KEY</span><span class="op">)</span>
<span class="va">n_patients</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">primary_journey</span><span class="op">$</span><span class="va">PERSON_KEY</span><span class="op">)</span></code></pre></div>
<p>Furthermore, the cohort selected have an admission date between <strong>2017-04-01</strong> - <strong>2017-06-29</strong> and includes any journeys that includes an encounter at <strong>Royal North Shore</strong>.</p>
<p>The analysis therefore includes N = <strong>105</strong> unique journeys with <strong>121</strong> encounters for <strong>102</strong> unique patients.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">proportion_bar_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>,<span class="va">column</span>,<span class="va">title</span><span class="op">)</span><span class="op">{</span>
  <span class="va">df</span> <span class="op">%&gt;%</span>
     <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html">sym</a></span><span class="op">(</span><span class="va">column</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>,stat<span class="op">=</span><span class="st">"count"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="va">column</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Percent (%)"</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">title</span>, <span class="st">" (N = "</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span>
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">..count..</span>,y<span class="op">=</span> <span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>,
       stat<span class="op">=</span><span class="st">'count'</span>,
       vjust<span class="op">=</span><span class="op">-</span><span class="fl">0.25</span>
   <span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="demographics" class="section level1">
<h1 class="hasAnchor">
<a href="#demographics" class="anchor"></a>Demographics</h1>
<p>Figure @ref(fig:demo-plot) shows the distribution of ICD10 codes, age and sex.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">icd10_plot</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>,<span class="st">"DISPLAY_IDENTIFIER_CAP"</span>,<span class="st">"ICD10 codes"</span><span class="op">)</span>

<span class="va">age_plot</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>,<span class="st">"AGE_BINNED"</span>,<span class="st">"AGE"</span><span class="op">)</span>

<span class="va">sex_plot</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>,<span class="st">"GENDER"</span>,<span class="st">"SEX"</span><span class="op">)</span>

<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span><span class="va">icd10_plot</span>, <span class="va">age_plot</span>, <span class="va">sex_plot</span>,
          labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">3</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/demo-plot-1.png" alt="Demographics of journeys." width="700"><p class="caption">
Demographics of journeys.
</p>
</div>
<p>Figure @ref(fig:code-cat-plot) shows the distribution of ICD10 codes conditioned on age and sex. The plots suggests that older age groups are more likely to be coded as having an ICD10 code of <code>I50.0 Heart failure</code> and are less likely to be coded as <code>I50.1 Left ventricular failure</code>. There seems to be no significant differences in diagnosis between sex.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">

 <span class="va">age_plot</span><span class="op">&lt;-</span> <span class="va">primary_journey_demo</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">AGE_BINNED</span>,<span class="va">DISPLAY_IDENTIFIER_CAP</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">AGE_BINNED</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/prop.table.html">prop.table</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">AGE_BINNED</span>,y<span class="op">=</span><span class="va">prop</span>,fill<span class="op">=</span><span class="va">DISPLAY_IDENTIFIER_CAP</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>,position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span><span class="fl">0.8</span><span class="op">)</span>,width<span class="op">=</span><span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span> <span class="va">n</span>,y<span class="op">=</span><span class="va">prop</span><span class="op">)</span>,position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span><span class="fl">0.8</span><span class="op">)</span>,vjust<span class="op">=</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Percent (%)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"ICD10 code"</span><span class="op">)</span>

 <span class="va">sex_plot</span><span class="op">&lt;-</span> <span class="va">primary_journey_demo</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">GENDER</span>,<span class="va">DISPLAY_IDENTIFIER_CAP</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">GENDER</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/prop.table.html">prop.table</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">GENDER</span>,y<span class="op">=</span><span class="va">prop</span>,fill<span class="op">=</span><span class="va">DISPLAY_IDENTIFIER_CAP</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>,position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span><span class="fl">0.8</span><span class="op">)</span>,width<span class="op">=</span><span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span> <span class="va">n</span>,y<span class="op">=</span><span class="va">prop</span><span class="op">)</span>,position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span><span class="fl">0.8</span><span class="op">)</span>,vjust<span class="op">=</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Percent (%)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"ICD10 code"</span><span class="op">)</span>
 
  

<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span><span class="va">age_plot</span>, <span class="va">sex_plot</span>,
          labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">2</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/code-cat-plot-1.png" alt="Distribution of ICD10 codes conditioned on sex and age." width="700"><p class="caption">
Distribution of ICD10 codes conditioned on sex and age.
</p>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">postcode_plot</span><span class="op">&lt;-</span> <span class="va">primary_journey_demo</span> <span class="op">%&gt;%</span>
   <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">CURRENT_POSTCODE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"POSTCODE"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"COUNT"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"POSTCODE (N = "</span>,<span class="va">n_journeys</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span>
     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">..count..</span><span class="op">)</span>,
     stat<span class="op">=</span><span class="st">'count'</span>,
     nudge_y<span class="op">=</span><span class="fl">0.5</span>,
     va<span class="op">=</span><span class="st">'bottom'</span>
 <span class="op">)</span>
<span class="va">postcode_plot</span></code></pre></div>
<p><img src="heartfailure_prelim_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div id="journey-characteristics" class="section level1">
<h1 class="hasAnchor">
<a href="#journey-characteristics" class="anchor"></a>Journey Characteristics</h1>
<p>Figure @ref(fig:journey_char_plot) shows the characteristics of the journeys such as the presentation mode, whether the journey involved a transfer and the separation mode. Those presented as <code>Ambulance Triage</code> are defined as journeys that hadtheir jorueny first facility as <code>Royal North Shore</code> and whether their triage form contained the presence of <code>atami</code> or <code>etami</code> or <code>cath lab</code>.</p>
<p>Most encounters are admitted into ED and most journeys either arrived by ambulance or as a self presentation.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">p1</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey</span>, <span class="st">"ENCLASS"</span>, <span class="st">"Encounter_type"</span><span class="op">)</span>

<span class="va">p2</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="st">"PRESENTATION_MODE"</span>, <span class="st">"PRESENTATION_MODE"</span><span class="op">)</span>
<span class="va">p3</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="st">"TRANSFER_STATUS"</span>, <span class="st">"TRANSFER_STATUS"</span><span class="op">)</span>
<span class="va">p4</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="st">"SEPARATION_MODE"</span>, <span class="st">"SEPARATION_MODE"</span><span class="op">)</span>

<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, <span class="va">p3</span>,<span class="va">p4</span>,
          labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>,<span class="st">"D"</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">2</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="heartfailure_prelim_files/figure-html/journey_char_plot-1.png" width="700"></p>
</div>
<div id="discharge-medications" class="section level1">
<h1 class="hasAnchor">
<a href="#discharge-medications" class="anchor"></a>Discharge Medications</h1>
<p>Discharge medications were defined as journeys that had a discharge letter and excluded journeys that had a separation mode of either <strong>death, dama, private hospital</strong>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hf_discharge_journeys</span> <span class="op">&lt;-</span> <span class="va">primary_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">ENCNTR_KEY</span> <span class="op">%in%</span> <span class="va">hf_discharge_letter_keys</span><span class="op">)</span>

<span class="va">n_journeys_w_discharge</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">hf_discharge_journeys</span><span class="op">$</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>

<span class="co">## need to consider eplerenone</span>
<span class="co">## https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4814010/</span></code></pre></div>
<p><strong>93.3</strong>% (<strong>98</strong>/<strong>105</strong>) had a discharge letter and of those,<strong>83.7</strong>% (<strong>82</strong>/<strong>98</strong>) remained after the exclusion criteria.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ace</span><span class="op">&lt;-</span> <span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MEDICATION</span> <span class="op">==</span> <span class="st">"A2RB/ACE Inhibitor"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">MEDICATION_NAME</span><span class="op">)</span>

<span class="va">beta</span><span class="op">&lt;-</span> <span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MEDICATION</span> <span class="op">==</span> <span class="st">"Beta blocker"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">MEDICATION_NAME</span><span class="op">)</span>

<span class="va">diuretic</span><span class="op">&lt;-</span> <span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MEDICATION</span> <span class="op">==</span> <span class="st">"Other diuretic"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">MEDICATION_NAME</span><span class="op">)</span></code></pre></div>
<p>The medications examined include:</p>
<ul>
<li>ACE inhibitors such as <strong>candesartan, perindopril, irbesartan</strong>,</li>
<li>beta blockers such as <strong>propranolol, metoprolol, sotalol</strong> and</li>
<li>diuretics such as <strong>spironolactone, hydrochlorothiazide, eplerenone</strong>.</li>
</ul>
<p>Figure @ref(fig:meds-plot) shows the proportion of journeys that were discharged with the relevant medication.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">primary_meds_sum</span> <span class="op">%&gt;%</span>
  <span class="fu">gather</span><span class="op">(</span><span class="va">medication</span>, <span class="va">val</span>, <span class="va">`Other diuretic`</span><span class="op">:</span><span class="va">`Beta blocker`</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>val <span class="op">=</span> <span class="va">val</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">medication</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">/</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>medication <span class="op">=</span> <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">medication</span>, <span class="va">percent</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">medication</span>,y<span class="op">=</span><span class="va">percent</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span>
     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">n</span><span class="op">)</span>,
     nudge_y<span class="op">=</span><span class="fl">1.5</span>,
     va<span class="op">=</span><span class="st">'bottom'</span>
 <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"Medication"</span>,y<span class="op">=</span><span class="st">"Percent (%)"</span>,
       title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Medication (N = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">primary_meds_sum</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/meds-plot-1.png" alt="Proportion of journeys with discharge medication." width="700"><p class="caption">
Proportion of journeys with discharge medication.
</p>
</div>
</div>
<div id="discharge-diagnosis-and-icd10-diagnosis-concordance" class="section level1">
<h1 class="hasAnchor">
<a href="#discharge-diagnosis-and-icd10-diagnosis-concordance" class="anchor"></a>Discharge Diagnosis and ICD10 Diagnosis Concordance</h1>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hf_snomed_encounters</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_snomed_encounters</span><span class="op">)</span>
<span class="va">hf_icd10_encounters</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_icd10_encounters</span><span class="op">)</span>
<span class="va">fac_snomed_encounter</span> <span class="op">&lt;-</span> <span class="va">hf_snomed_encounters</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span> <span class="va">facility_list</span><span class="op">)</span>

<span class="va">fac_icd10_encounter</span> <span class="op">&lt;-</span> <span class="va">hf_icd10_encounters</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span> <span class="va">facility_list</span><span class="op">)</span></code></pre></div>
<p>We examine encounters with either a ICD10 or discharge (SNOMED) diagnosis of heart failure over the same period of time and facilities. This results in <strong>103</strong> ICD10 encounter and <strong>38</strong> SNOMED encounters with the following list of SNOMED codes:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">as.tibble</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">fac_snomed_encounter</span><span class="op">$</span><span class="va">SOURCE_STRING_CAP</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
value
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ACUTE EXACERBATION OF CHRONIC CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
BIVENTRICULAR FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
CHRONIC LEFT-SIDED CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
CHF - CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
ACUTE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
EXACERBATION OF CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
HF - HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
LEFT VENTRICULAR FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
RIGHT HEART FAILURE DUE TO PULMONARY DISEASE
</td>
</tr>
<tr>
<td style="text-align:left;">
HEART FAILURE WITH NORMAL EJECTION FRACTION
</td>
</tr>
<tr>
<td style="text-align:left;">
HEART FAILURE WITH REDUCED EJECTION FRACTION
</td>
</tr>
<tr>
<td style="text-align:left;">
ACUTE CONGESTIVE HEART FAILURE
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comb_encounters</span><span class="op">&lt;-</span><span class="va">fac_icd10_encounter</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ENCNTR_KEY</span>, <span class="va">SOURCE_STRING_CAP</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">fac_snomed_encounter</span>,<span class="va">ENCNTR_KEY</span>,<span class="va">SOURCE_STRING_CAP</span><span class="op">)</span>,
    by<span class="op">=</span><span class="st">"ENCNTR_KEY"</span>,
    suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"_ICD10"</span>,<span class="st">"_SNOMED"</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>HAS_ICD10 <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">SOURCE_STRING_CAP_ICD10</span><span class="op">)</span>,
                HAS_SNOMED <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">SOURCE_STRING_CAP_SNOMED</span><span class="op">)</span><span class="op">)</span>

<span class="va">snomed_icd10</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_ICD10</span>,<span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_SNOMED</span><span class="op">)</span> 

<span class="va">prop_snomed_icd10</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/prop.table.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_ICD10</span>,<span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_SNOMED</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<p>Taking the union of the two types of diagnosis codes together, there are <strong>121</strong> unique encounters.</p>
<p>Table @ref(tab:icd10-tab) shows a contingency table between discharge diagnosis and ICD10 codes where only <strong>16.5</strong>% have both an ICD10 and SNOMED heart failure code.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="va">snomed_icd10</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">2</span>,caption <span class="op">=</span> <span class="st">"Contigency table of discharge diagnosis and ICD10 code."</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"HAS_ICD10"</span><span class="op">=</span><span class="fl">1</span>,<span class="st">"HAS_SNOMED"</span><span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>
Contigency table of discharge diagnosis and ICD10 code.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
HAS_ICD10
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
HAS_SNOMED
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
FALSE
</th>
<th style="text-align:right;">
TRUE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">prop_snomed_icd10</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">2</span>, caption <span class="op">=</span> <span class="st">"Contigency table of discharge diagnosis and ICD10 code as percentage."</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"HAS_ICD10"</span><span class="op">=</span><span class="fl">1</span>,<span class="st">"HAS_SNOMED"</span><span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>
Contigency table of discharge diagnosis and ICD10 code as percentage.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
HAS_ICD10
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
HAS_SNOMED
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
FALSE
</th>
<th style="text-align:right;">
TRUE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.15
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
0.69
</td>
<td style="text-align:right;">
0.17
</td>
</tr>
</tbody>
</table>
</div>
<div id="secondary-diagnosis" class="section level1">
<h1 class="hasAnchor">
<a href="#secondary-diagnosis" class="anchor"></a>Secondary Diagnosis</h1>
<p>The above results focused on those with a primary ICD10 heart failure diagnosis. The next section examines those with a <code>secondary</code> or <code>additional</code> ICD10 diagnosis.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cohort_journey_keys</span> <span class="op">&lt;-</span> <span class="va">hf_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span>  <span class="va">facility_list</span>, <span class="va">DIAGNOSIS_IMPORTANCE</span> <span class="op">==</span> <span class="st">"secondary_diagnosis"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>

<span class="va">secondary_journey_demo</span> <span class="op">&lt;-</span> <span class="va">hf_journey_demo_prep</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">icd10_plot</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">secondary_journey_demo</span>,<span class="st">"DISPLAY_IDENTIFIER_CAP"</span>,<span class="st">"Additional Diagnosis"</span><span class="op">)</span>

<span class="va">icd10_plot</span></code></pre></div>
<p><img src="heartfailure_prelim_files/figure-html/unnamed-chunk-11-1.png" width="700"> The cohort for a secondary diagnosis of heart failure is larger (N = <strong>419</strong>) than those diagnosed with a primary diagnosis (N = <strong>105</strong>) and also includes encounters coded with <code>chronic heart failure</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.sydney.edu.au/speed-extract/">Harrison Nguyen</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
