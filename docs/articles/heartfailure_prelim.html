<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feasibility analysis for measuring clinical indicators in patients admitted with Heart Failure in NSLHD • acs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Feasibility analysis for measuring clinical indicators in patients admitted with Heart Failure in NSLHD">
<meta property="og:description" content="acs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">acs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/acs_procedures.html">The 'Cath Lab' and ICD10 Procedures</a>
    </li>
    <li>
      <a href="../articles/heartfailure_prelim.html">Feasibility analysis for measuring clinical indicators in patients admitted with Heart Failure in NSLHD</a>
    </li>
    <li>
      <a href="../articles/snomed_icd10_stemi.html">ICD10 SNOMED Concordance</a>
    </li>
    <li>
      <a href="../articles/validating_acs.html">Defining ACS Cohort for Clinical Indicator Dashboard</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.sydney.edu.au/speed-extract/acs/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="heartfailure_prelim_files/header-attrs-2.7/header-attrs.js"></script><link href="heartfailure_prelim_files/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<script src="heartfailure_prelim_files/kePrint-0.0.1/kePrint.js"></script><link href="heartfailure_prelim_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Feasibility analysis for measuring clinical indicators in patients admitted with Heart Failure in NSLHD</h1>
                        <h4 class="author">Harrison Nguyen</h4>
            
            <h4 class="date">05/07/2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.sydney.edu.au/speed-extract/acs/blob/master/vignettes/heartfailure_prelim.Rmd"><code>vignettes/heartfailure_prelim.Rmd</code></a></small>
      <div class="hidden name"><code>heartfailure_prelim.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/targets/">targets</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/">ggpubr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.sydney.edu.au/speed-extract/acs">acs</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ardata-fr.github.io/flextable-book/">flextable</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/seancarmody/rmapaus">rmapaus</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"R/definitions.R"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="va">hf_journey</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_journey</span><span class="op">)</span>
<span class="va">hf_journey_demo_prep</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_journey_demo_prep</span><span class="op">)</span>

<span class="va">hf_discharge_letter_keys</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_discharge_letter_keys</span><span class="op">)</span>

<span class="va">hf_journey_meds_admit_discharge</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_journey_meds_admit_discharge</span><span class="op">)</span>
<span class="va">hf_meds_discharge_sum</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_meds_discharge_sum</span><span class="op">)</span>


<span class="va">hf_echo_procedures</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_echo_procedures</span><span class="op">)</span></code></pre></div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This is a feasibility analysis to examine clinical indicators in patients with encounters with a heart failure-related ICD-10 code (primary or additional). This feasibility analysis uses an existing 3-month EMR extract (1/4/17-30/6/17) in patients that presented with suspected acute coronary syndrome to NSLHD. We will examine subject demographics, whether patients have undergone specific investigations and/or procedures and the proportion of patients that have been discharged on specific medications.</p>
<p>This initial analysis will be performed in patients with encounters at RNSH with a primary or additional heart failure-related ICD10 code.</p>
</div>
<div id="rnsh-patient-journeys-with-an-icd10-heart-failure-primary-diagnosis" class="section level1">
<h1 class="hasAnchor">
<a href="#rnsh-patient-journeys-with-an-icd10-heart-failure-primary-diagnosis" class="anchor"></a>RNSH patient journeys with an ICD10 Heart Failure Primary Diagnosis</h1>
<div id="cohort" class="section level2">
<h2 class="hasAnchor">
<a href="#cohort" class="anchor"></a>Cohort</h2>
<div id="primary-diagnosis" class="section level3">
<h3 class="hasAnchor">
<a href="#primary-diagnosis" class="anchor"></a>Primary Diagnosis</h3>
<p>This analysis was performed using patient journeys. Patient ‘journeys’ were defined as encounters where each encounter is separated by at most 24 hours from the following encounter that were designated the following ICD10 codes as a primary diagnosis:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="../reference/hf_icd_codes.html">hf_icd_codes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>ICD10 <span class="op">=</span> <span class="va">codes</span>,Description<span class="op">=</span><span class="va">names</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
ICD10
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
I50.0
</td>
<td style="text-align:left;">
Heart failure
</td>
</tr>
<tr>
<td style="text-align:left;">
I50.1
</td>
<td style="text-align:left;">
Left venctricular failure, unspecified
</td>
</tr>
<tr>
<td style="text-align:left;">
I50.9
</td>
<td style="text-align:left;">
Heart failure, unspecified
</td>
</tr>
<tr>
<td style="text-align:left;">
U82.2
</td>
<td style="text-align:left;">
Chronic heart failure
</td>
</tr>
<tr>
<td style="text-align:left;">
I11.0
</td>
<td style="text-align:left;">
Hypertensive heart disease with heart failure
</td>
</tr>
<tr>
<td style="text-align:left;">
I13.0
</td>
<td style="text-align:left;">
Hypertensive heart and chronic kidney disease with heart failure and stage 1 through stage 4 chronic kidney disease, or unspecified chronic kidney disease
</td>
</tr>
<tr>
<td style="text-align:left;">
I13.2
</td>
<td style="text-align:left;">
Hypertensive heart and chronic kidney disease with heart failure and with stage 5 chronic kidney disease, or end stage renal disease
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">facility_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Royal North Shore"</span><span class="op">)</span>
<span class="va">cohort_journey_keys</span> <span class="op">&lt;-</span> <span class="va">hf_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span>  <span class="va">facility_list</span>, <span class="va">DIAGNOSIS_IMPORTANCE</span> <span class="op">==</span> <span class="st">"primary_diagnosis"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>



<span class="va">primary_journey</span> <span class="op">&lt;-</span> <span class="va">hf_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">primary_journey_demo</span> <span class="op">&lt;-</span><span class="va">hf_journey_demo_prep</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">primary_meds</span> <span class="op">&lt;-</span><span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">primary_meds_sum</span> <span class="op">&lt;-</span> <span class="va">hf_meds_discharge_sum</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys</span> <span class="op">)</span>

<span class="va">cohort_encounter_keys</span> <span class="op">&lt;-</span> <span class="va">primary_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">ENCNTR_KEY</span><span class="op">)</span>

<span class="va">primary_echo</span> <span class="op">&lt;-</span> <span class="va">hf_echo_procedures</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">ENCNTR_KEY</span> <span class="op">%in%</span> <span class="va">cohort_encounter_keys</span> <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_journeys</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">primary_journey</span><span class="op">$</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>
<span class="va">n_encounters</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">primary_journey</span><span class="op">$</span><span class="va">ENCNTR_KEY</span><span class="op">)</span>
<span class="va">n_patients</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">primary_journey</span><span class="op">$</span><span class="va">PERSON_KEY</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">proportion_bar_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>,<span class="va">column</span>,<span class="va">title</span><span class="op">)</span><span class="op">{</span>
  <span class="va">plot</span><span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span>
     <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html">sym</a></span><span class="op">(</span><span class="va">column</span><span class="op">)</span>,fill<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html">sym</a></span><span class="op">(</span><span class="va">column</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">..count..</span><span class="op">)</span>,stat<span class="op">=</span><span class="st">"count"</span>,alpha<span class="op">=</span><span class="fl">0.5</span>,show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Count"</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">title</span>, <span class="st">" (n = "</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span>
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,<span class="fl">0</span><span class="op">)</span>,<span class="st">"%"</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>,y<span class="op">=</span> <span class="va">..count..</span><span class="op">)</span>,
       stat<span class="op">=</span><span class="st">'count'</span>,
       vjust<span class="op">=</span><span class="op">-</span><span class="fl">0.25</span>
   <span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span>
  
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Furthermore, the cohort selected have an admission date between <strong>2017-04-01</strong> - <strong>2017-06-29</strong> and includes any journeys that includes an encounter at <strong>Royal North Shore</strong>.</p>
<p>The analysis therefore includes n = <strong>105</strong> unique journeys with <strong>121</strong> encounters for <strong>102</strong> unique patients.</p>
<p>Figure @ref(fig:code-dist) shows the distribution of ICD10 codes for the cohort.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">icd10_plot</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>,<span class="st">"DISPLAY_IDENTIFIER_CAP"</span>,<span class="st">"ICD10 codes"</span><span class="op">)</span>

<span class="va">icd10_plot</span>  <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/code-dist-1.png" alt="Distribution of ICD10 codes" width="700"><p class="caption">
Distribution of ICD10 codes
</p>
</div>
</div>
<div id="primary-and-additional-diagnosis" class="section level3">
<h3 class="hasAnchor">
<a href="#primary-and-additional-diagnosis" class="anchor"></a>Primary and Additional Diagnosis</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cohort_journey_keys_secondary</span> <span class="op">&lt;-</span> <span class="va">hf_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span>  <span class="va">facility_list</span>, <span class="va">DIAGNOSIS_IMPORTANCE</span> <span class="op">==</span> <span class="st">"secondary_diagnosis"</span> <span class="op">|</span> <span class="va">DIAGNOSIS_IMPORTANCE</span> <span class="op">==</span> <span class="st">"primary_diagnosis"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>

<span class="va">secondary_journey_demo</span> <span class="op">&lt;-</span> <span class="va">hf_journey_demo_prep</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys_secondary</span><span class="op">)</span>

<span class="va">icd10_plot</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">secondary_journey_demo</span>,<span class="st">"DISPLAY_IDENTIFIER_CAP"</span>,<span class="st">"Primary and Additional Diagnosis"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"ICD10 code"</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Another cohort is also defined by those with either a <code>primary</code> or <code>additional</code> heart failure diagnosis.</p>
<p>The cohort that includes a <code>additional</code> diagnosis of heart failure is larger (n = <strong>522</strong>) than those diagnosed with a primary diagnosis (n = <strong>105</strong>) and also includes encounters coded with <code>chronic heart failure</code>.</p>
<p>Figure @ref(fig:primary-secondary-icd10) shows the distribution of both primary and additional ICD10 diagnosis, where there are n = <strong>522</strong> journeys with either a primary or additional diagnosis.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">icd10_plot</span> </code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/primary-secondary-icd10-1.png" alt="Distribution of primary and secondary heart failure ICD10 diagnosis." width="700"><p class="caption">
Distribution of primary and secondary heart failure ICD10 diagnosis.
</p>
</div>
</div>
<div id="comparison-against-casemix-app" class="section level3">
<h3 class="hasAnchor">
<a href="#comparison-against-casemix-app" class="anchor"></a>Comparison against CaseMix App</h3>
<p>The above numbers were compared against the in-house <code>Admitted Patient CaseMix app</code> developed by the NSLHD Performance and Analytics team that shows the numbers of encounters and their characteristics of each ICD10 diagnosis.</p>
<p>Figure @ref(fig:clinical-app-demo) shows that there are 108 encounters with a primary heart failure ICD10 diagnosis over a similar period of time at <code>Royal North Shore</code> (as opposed to the <strong>105</strong> journeys). Furthermore the distribution of ICD10 codes are comparable between our feasibility analysis and the NSLHD Performance and Analytics team.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># All defaults</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"vignettes/img/clinical_app_hf_rns.png"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="img/clinical_app_hf_rns.png" alt=""><p class="caption">Distribution of ICD10 heart failure encounters using the `Admitted Patient CaseMix App.</p>
</div>
</div>
</div>
<div id="demographics" class="section level2">
<h2 class="hasAnchor">
<a href="#demographics" class="anchor"></a>Demographics</h2>
<p>Table @ref(tab:demo-tab-gender) shows the counts of males and females stratified by ICD10 diagnosis.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">total</span><span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">primary_journey_demo</span>, GENDER <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">GENDER</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>
    N <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
    Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">AGE_AT_ADMIT</span><span class="op">)</span><span class="op">)</span>,
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"GENDER"</span>, values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"Age"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>p_Female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Female</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>,
         p_Male <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Male</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span>
         Females <span class="op">=</span> <span class="va">N_Female</span>, <span class="va">p_Female</span>,
         Males <span class="op">=</span> <span class="va">N_Male</span>, <span class="va">p_Male</span>,
         <span class="va">N_Total</span>,
         <span class="va">Age_Female</span>,
         <span class="va">Age_Male</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Group <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span>
  

<span class="fu">bind_rows</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">primary_journey_demo</span>, GENDER <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">DISPLAY_IDENTIFIER_CAP</span>,<span class="va">GENDER</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>
    N <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
    Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">AGE_AT_ADMIT</span><span class="op">)</span><span class="op">)</span>,
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"GENDER"</span>, values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"Age"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>p_Female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Female</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>,
         p_Male <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Male</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span>Group <span class="op">=</span> <span class="va">DISPLAY_IDENTIFIER_CAP</span>,
         Females <span class="op">=</span> <span class="va">N_Female</span>, <span class="va">p_Female</span>,
         Males <span class="op">=</span> <span class="va">N_Male</span>, <span class="va">p_Male</span>,
         <span class="va">N_Total</span>,
         <span class="va">Age_Female</span>,
         <span class="va">Age_Male</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">bind_rows</span><span class="op">(</span><span class="va">total</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_header_labels.html">set_header_labels</a></span><span class="op">(</span>Group <span class="op">=</span> <span class="st">""</span>, p_Female <span class="op">=</span> <span class="st">"%"</span>, p_Male <span class="op">=</span> <span class="st">"%"</span>, N_Total <span class="op">=</span> <span class="st">"n"</span>,
                    Age_Female <span class="op">=</span> <span class="st">"Age (F)"</span>, Age_Male <span class="op">=</span> <span class="st">"Age (M)"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_caption.html">set_caption</a></span><span class="op">(</span><span class="st">"Male and Female counts and mean age stratified by ICD10 diagnosis."</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/autofit.html">autofit</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<template id="8107cd91-cd93-4963-b6b0-54a672911233"><style>
.tabwid table{
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-spacing: 0;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-95090bb8{border-collapse:collapse;}.cl-94fbc4e4{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-94fbebea{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-94fbebeb{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-94fc6138{width:57.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc6139{width:59.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc613a{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc613b{width:62.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc613c{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc613d{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc613e{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc613f{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc6140{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc6141{width:57.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc6142{width:59.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc8834{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc8835{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc8836{width:62.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc8837{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc8838{width:57.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc8839{width:59.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc883a{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc883b{width:45pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc883c{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-94fc883d{width:62.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-95090bb8">
<caption class="Table Caption">Male and Female counts and mean age stratified by ICD10 diagnosis.</caption>
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-94fc883b"><p class="cl-94fbebea"><span class="cl-94fbc4e4"></span></p></td>
<td class="cl-94fc883d"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">Females</span></p></td>
<td class="cl-94fc8837"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">%</span></p></td>
<td class="cl-94fc883a"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">Males</span></p></td>
<td class="cl-94fc8837"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">%</span></p></td>
<td class="cl-94fc883c"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">n</span></p></td>
<td class="cl-94fc8838"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">Age (F)</span></p></td>
<td class="cl-94fc8839"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">Age (M)</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-94fc613e"><p class="cl-94fbebea"><span class="cl-94fbc4e4">I50.0</span></p></td>
<td class="cl-94fc613b"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">41</span></p></td>
<td class="cl-94fc613a"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">46.6</span></p></td>
<td class="cl-94fc613c"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">47</span></p></td>
<td class="cl-94fc613a"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">53.4</span></p></td>
<td class="cl-94fc613d"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">88</span></p></td>
<td class="cl-94fc6138"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">85</span></p></td>
<td class="cl-94fc6139"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">84</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-94fc613e"><p class="cl-94fbebea"><span class="cl-94fbc4e4">I50.1</span></p></td>
<td class="cl-94fc613b"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">5</span></p></td>
<td class="cl-94fc613a"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">38.5</span></p></td>
<td class="cl-94fc613c"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">8</span></p></td>
<td class="cl-94fc613a"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">61.5</span></p></td>
<td class="cl-94fc613d"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">13</span></p></td>
<td class="cl-94fc6138"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">82</span></p></td>
<td class="cl-94fc6139"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">74</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-94fc613e"><p class="cl-94fbebea"><span class="cl-94fbc4e4">I50.9</span></p></td>
<td class="cl-94fc613b"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">1</span></p></td>
<td class="cl-94fc613a"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">25.0</span></p></td>
<td class="cl-94fc613c"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">3</span></p></td>
<td class="cl-94fc613a"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">75.0</span></p></td>
<td class="cl-94fc613d"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">4</span></p></td>
<td class="cl-94fc6138"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">79</span></p></td>
<td class="cl-94fc6139"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">88</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-94fc613f"><p class="cl-94fbebea"><span class="cl-94fbc4e4">Total</span></p></td>
<td class="cl-94fc8836"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">47</span></p></td>
<td class="cl-94fc8835"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">44.8</span></p></td>
<td class="cl-94fc8834"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">58</span></p></td>
<td class="cl-94fc8835"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">55.2</span></p></td>
<td class="cl-94fc6140"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">105</span></p></td>
<td class="cl-94fc6141"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">84</span></p></td>
<td class="cl-94fc6142"><p class="cl-94fbebeb"><span class="cl-94fbc4e4">83</span></p></td>
</tr>
</tbody>
</table>
</div></template><div class="flextable-shadow-host" id="b649dcdf-c123-4462-a193-1f22a45e832a"></div>
<script>
var dest = document.getElementById("b649dcdf-c123-4462-a193-1f22a45e832a");
var template = document.getElementById("8107cd91-cd93-4963-b6b0-54a672911233");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">conditional_bar_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>,<span class="va">var1</span>,<span class="va">var2</span>,<span class="va">title</span><span class="op">)</span><span class="op">{</span>
  
  <span class="va">var1</span><span class="op">&lt;-</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html">sym</a></span><span class="op">(</span><span class="va">var1</span><span class="op">)</span>
  <span class="va">var2</span><span class="op">&lt;-</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html">sym</a></span><span class="op">(</span><span class="va">var2</span><span class="op">)</span>
  <span class="va">plot</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="va">var1</span>,<span class="op">!</span><span class="op">!</span><span class="va">var2</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="va">var1</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/prop.table.html">prop.table</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="va">var1</span>,y<span class="op">=</span><span class="va">n</span>,fill<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="va">var2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>,position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span><span class="fl">0.7</span><span class="op">)</span>,width<span class="op">=</span><span class="fl">0.7</span>,alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">prop</span>,<span class="fl">0</span><span class="op">)</span>,<span class="st">"%"</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>,y<span class="op">=</span><span class="va">n</span><span class="op">)</span>,position<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span><span class="fl">0.7</span><span class="op">)</span>,vjust<span class="op">=</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"Count"</span>,x<span class="op">=</span><span class="va">var1</span>, title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">title</span>, <span class="st">" (N = "</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="va">var2</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span>
  
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Figure @ref(fig:age-sex-plot) shows the distribution of sex according to age groups.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">conditional_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>,<span class="st">"AGE_BINNED"</span>,<span class="st">"GENDER"</span>, <span class="st">"Age and Sex"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"SEX"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/age-sex-plot-1.png" alt="Distribution of Sex conditioned on Age." width="700"><p class="caption">
Distribution of Sex conditioned on Age.
</p>
</div>
</div>
<div id="patient-journey-characteristics" class="section level2">
<h2 class="hasAnchor">
<a href="#patient-journey-characteristics" class="anchor"></a>Patient Journey Characteristics</h2>
<p>Figure @ref(fig:journey-char-plot) shows the characteristics of patient journeys such as presentation mode, whether the journey involved a transfer and the separation mode.</p>
<p>Most encounters are admitted into ED and most journeys either arrived by ambulance followed by self presentation and most journeys that include <code>Royal North Shore</code> begin at <code>Royal North Shore</code> rather than other hospitals in the local health district and shown by the journey trajectories in Figure @ref(fig:journey-char-plot)c.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">p1</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey</span>, <span class="st">"ENCLASS"</span>, <span class="st">"Encounter Type"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">120</span><span class="op">)</span>

<span class="va">p2</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span>
  <span class="va">primary_journey_demo</span> <span class="op">%&gt;%</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PRESENTATION_MODE <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">PRESENTATION_MODE</span>,<span class="st">"triage"</span><span class="op">)</span><span class="op">~</span> <span class="st">"Ambulance"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">PRESENTATION_MODE</span><span class="op">)</span>
    <span class="op">)</span>, <span class="st">"PRESENTATION_MODE"</span>, <span class="st">"Mode of Presentation"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">120</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="st">"TRAJECTORY"</span>, <span class="st">"Journey Trajectory"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">121</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_axis.html">guide_axis</a></span><span class="op">(</span>n.dodge<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="va">p4</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="st">"SEPARATION_MODE"</span>, <span class="st">"Mode of Separation"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span>



<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, <span class="va">p3</span>,<span class="va">p4</span>,
          labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>,<span class="st">"D"</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">2</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/journey-char-plot-1.png" alt="Characteristics of journeys." width="700"><p class="caption">
Characteristics of journeys.
</p>
</div>
<p>Figure @ref(fig:journey-final-plot) shows that most journeys end at <code>Royal North Shore</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p6</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>, <span class="st">"JOURNEY_FINAL_FACILITY"</span>, <span class="st">"Journey Final Facility"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">120</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">p6</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/journey-final-plot-1.png" alt="Final facility of journeys." width="700"><p class="caption">
Final facility of journeys.
</p>
</div>
</div>
<div id="discharge-medications" class="section level2">
<h2 class="hasAnchor">
<a href="#discharge-medications" class="anchor"></a>Discharge Medications</h2>
<p>Discharge medications were defined as journeys that had a discharge letter and excluded journeys that had a mode of separation of either <strong>death, dama, private hospital</strong>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hf_discharge_journeys</span> <span class="op">&lt;-</span> <span class="va">primary_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">ENCNTR_KEY</span> <span class="op">%in%</span> <span class="va">hf_discharge_letter_keys</span><span class="op">)</span>

<span class="va">n_journeys_w_discharge</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct</a></span><span class="op">(</span><span class="va">hf_discharge_journeys</span><span class="op">$</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>

<span class="co">## need to consider eplerenone</span>
<span class="co">## https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4814010/</span></code></pre></div>
<p><strong>93.3</strong>% (<strong>98</strong>/<strong>105</strong>) had a discharge letter and of those, <strong>83.7</strong>% (<strong>82</strong>/<strong>98</strong>) remained after the exclusion criteria.</p>
<p>Figure @ref(fig:med-discharge-facility) shows the final facility of the those journeys that satisfy the criteria for a discharge medication and demonstrates that almost all discharges occur at <code>Royal North Shore</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">primary_meds_sum</span><span class="op">$</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>, 
  <span class="st">"JOURNEY_FINAL_FACILITY"</span>, 
  <span class="st">"Discharge Facility"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span> <span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/med-discharge-facility-1.png" alt="Distribution of discharge facility for journeys that satisfy the discharge medication criteria." width="700"><p class="caption">
Distribution of discharge facility for journeys that satisfy the discharge medication criteria.
</p>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ace</span><span class="op">&lt;-</span> <span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MEDICATION</span> <span class="op">==</span> <span class="st">"A2RB/ACE Inhibitor"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">MEDICATION_NAME</span><span class="op">)</span>

<span class="va">beta</span><span class="op">&lt;-</span> <span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MEDICATION</span> <span class="op">==</span> <span class="st">"Beta blocker"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">MEDICATION_NAME</span><span class="op">)</span>

<span class="va">diuretic</span><span class="op">&lt;-</span> <span class="va">hf_journey_meds_admit_discharge</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">MEDICATION</span> <span class="op">==</span> <span class="st">"Other diuretic"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">MEDICATION_NAME</span><span class="op">)</span></code></pre></div>
<p>The medications examined include:</p>
<ul>
<li>ACE inhibitors such as <strong>candesartan, perindopril, irbesartan</strong>,</li>
<li>beta blockers such as <strong>propranolol, metoprolol, sotalol</strong> and</li>
<li>diuretics such as <strong>spironolactone, hydrochlorothiazide, eplerenone</strong>.</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">wang_2013_reduced</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>medication<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A2RB/ACE Inhibitor"</span>,<span class="st">"Beta blocker"</span>, <span class="st">"Other diuretic"</span><span class="op">)</span>,
  percent<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">65.9</span>,<span class="fl">55.1</span>,<span class="fl">91.4</span><span class="op">)</span>,
  n<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">352</span>,<span class="fl">294</span>,<span class="fl">488</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">wang_2013_preserved</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>medication<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A2RB/ACE Inhibitor"</span>,<span class="st">"Beta blocker"</span>, <span class="st">"Other diuretic"</span><span class="op">)</span>,
  percent<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">56.3</span>,<span class="fl">45.4</span>,<span class="fl">92.4</span><span class="op">)</span>,
  n<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">162</span>,<span class="fl">131</span>,<span class="fl">266</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">med_table</span><span class="op">&lt;-</span><span class="va">primary_meds_sum</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>`None of the above` <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="va">`Other diuretic`</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">`Beta blocker`</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">`A2RB/ACE Inhibitor`</span> <span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="fl">1</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">gather</span><span class="op">(</span><span class="va">medication</span>, <span class="va">val</span>, <span class="va">`Other diuretic`</span><span class="op">:</span><span class="va">`None of the above`</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>val <span class="op">=</span> <span class="va">val</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">medication</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">/</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">slice</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A2RB/ACE Inhibitor"</span>,<span class="st">"Beta blocker"</span>, <span class="st">"Other diuretic"</span>,<span class="st">"None of the above"</span><span class="op">)</span>, <span class="va">medication</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Table @ref(tab:discharge-med-tab) shows a comparison to two different heart failure cohorts, one with reduced ejection fraction and preserved ejection fraction in <span class="citation"><a href="#ref-wang201915" role="doc-biblioref">Wang, Hales, and Tofler</a> (<a href="#ref-wang201915" role="doc-biblioref">2019</a>)</span>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">med_table</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span><span class="op">(</span><span class="va">is.numeric</span>,<span class="fu">funs</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">wang_2013_reduced</span>,by<span class="op">=</span><span class="st">"medication"</span>,suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".reduced"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">wang_2013_preserved</span>,by<span class="op">=</span><span class="st">"medication"</span>,suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".preserved"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">medication</span>,<span class="va">n</span>,<span class="va">percent</span>,<span class="va">n.reduced</span>,<span class="va">percent.reduced</span>,<span class="va">n.preserved</span>,<span class="va">percent.preserved</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_header_labels.html">set_header_labels</a></span><span class="op">(</span>medication <span class="op">=</span> <span class="st">"Medication"</span>, percent<span class="op">=</span><span class="st">"ICD10 (%)"</span>, n<span class="op">=</span><span class="st">"n ICD10"</span>,
                    percent.reduced <span class="op">=</span> <span class="st">"HFrEF (%)"</span>,n.reduced <span class="op">=</span>  <span class="st">"n HFrEF"</span>,
                    percent.preserved <span class="op">=</span> <span class="st">"HFpEF (%)"</span>,n.preserved <span class="op">=</span>  <span class="st">"n HFpEF"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/footnote.html">footnote</a></span><span class="op">(</span>i<span class="op">=</span><span class="fl">1</span>,
           j<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">6</span><span class="op">)</span>,
           value<span class="op">=</span> <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/as_paragraph.html">as_paragraph</a></span><span class="op">(</span>
             <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Cohort defined using heart failure ICD10 primary diagnosis."</span>,
               <span class="st">"Data is from reduced ejection fraction cohort between 2013-2015."</span>,
               <span class="st">"Data is from preserved ejection fraction cohort between 2013-2015."</span><span class="op">)</span><span class="op">)</span>,
              part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_caption.html">set_caption</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Proportion of patients with a relevant medication discharge. Data from @wang201915 is used as reference. Note that @wang201915 excludes spironolactone for `Other diuretics`."</span><span class="op">)</span></code></pre></div>
<template id="36d97d8d-0dde-475e-a995-efbe809e0868"><style>
.tabwid table{
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-spacing: 0;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-97428a76{border-collapse:collapse;}.cl-97393b7e{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-97393b7f{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-97393b80{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-97393b81{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9739899e{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9739899f{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-973989a0{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-973989a1{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-973989a2{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-973989a3{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-973989a4{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-97428a76">
<caption class="Table Caption">Proportion of patients with a relevant medication discharge. Data from @wang201915 is used as reference. Note that @wang201915 excludes spironolactone for `Other diuretics`.</caption>
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-973989a3"><p class="cl-97393b80"><span class="cl-97393b7e">Medication</span></p></td>
<td class="cl-973989a4"><p class="cl-97393b81"><span class="cl-97393b7e">n ICD10</span><span class="cl-97393b7f">1</span></p></td>
<td class="cl-973989a4"><p class="cl-97393b81"><span class="cl-97393b7e">ICD10 (%)</span></p></td>
<td class="cl-973989a4"><p class="cl-97393b81"><span class="cl-97393b7e">n HFrEF</span><span class="cl-97393b7f">2</span></p></td>
<td class="cl-973989a4"><p class="cl-97393b81"><span class="cl-97393b7e">HFrEF (%)</span></p></td>
<td class="cl-973989a4"><p class="cl-97393b81"><span class="cl-97393b7e">n HFpEF</span><span class="cl-97393b7f">3</span></p></td>
<td class="cl-973989a4"><p class="cl-97393b81"><span class="cl-97393b7e">HFpEF (%)</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-9739899f"><p class="cl-97393b80"><span class="cl-97393b7e">A2RB/ACE Inhibitor</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">41</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">50.0</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">352</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">65.9</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">162</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">56.3</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-9739899f"><p class="cl-97393b80"><span class="cl-97393b7e">Beta blocker</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">53</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">64.6</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">294</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">55.1</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">131</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">45.4</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-9739899f"><p class="cl-97393b80"><span class="cl-97393b7e">Other diuretic</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">21</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">25.6</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">488</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">91.4</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">266</span></p></td>
<td class="cl-9739899e"><p class="cl-97393b81"><span class="cl-97393b7e">92.4</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-973989a1"><p class="cl-97393b80"><span class="cl-97393b7e">None of the above</span></p></td>
<td class="cl-973989a0"><p class="cl-97393b81"><span class="cl-97393b7e">17</span></p></td>
<td class="cl-973989a0"><p class="cl-97393b81"><span class="cl-97393b7e">20.7</span></p></td>
<td class="cl-973989a0"><p class="cl-97393b81"><span class="cl-97393b7e"></span></p></td>
<td class="cl-973989a0"><p class="cl-97393b81"><span class="cl-97393b7e"></span></p></td>
<td class="cl-973989a0"><p class="cl-97393b81"><span class="cl-97393b7e"></span></p></td>
<td class="cl-973989a0"><p class="cl-97393b81"><span class="cl-97393b7e"></span></p></td>
</tr>
</tbody>
<tfoot>
<tr style="overflow-wrap:break-word;"><td colspan="7" class="cl-973989a2"><p class="cl-97393b80"><span class="cl-97393b7f">1</span><span class="cl-97393b7e">Cohort defined using heart failure ICD10 primary diagnosis.</span></p></td></tr>
<tr style="overflow-wrap:break-word;"><td colspan="7" class="cl-973989a2"><p class="cl-97393b80"><span class="cl-97393b7f">2</span><span class="cl-97393b7e">Data is from reduced ejection fraction cohort between 2013-2015.</span></p></td></tr>
<tr style="overflow-wrap:break-word;"><td colspan="7" class="cl-973989a2"><p class="cl-97393b80"><span class="cl-97393b7f">3</span><span class="cl-97393b7e">Data is from preserved ejection fraction cohort between 2013-2015.</span></p></td></tr>
</tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="ff041ac1-b382-457d-a43d-ed01b6a8a9c2"></div>
<script>
var dest = document.getElementById("ff041ac1-b382-457d-a43d-ed01b6a8a9c2");
var template = document.getElementById("36d97d8d-0dde-475e-a995-efbe809e0868");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>
</div>
</div>
<div id="primary-or-additional-heart-failure-diagnosis" class="section level1">
<h1 class="hasAnchor">
<a href="#primary-or-additional-heart-failure-diagnosis" class="anchor"></a>Primary or Additional Heart Failure Diagnosis</h1>
<p>The above results focused on those with a primary ICD10 heart failure diagnosis. The next section examines those with a <code>primary</code> or <code>additional</code> ICD10 diagnosis.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">total</span><span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">secondary_journey_demo</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">secondary_journey_demo</span>, GENDER <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">GENDER</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>
    N <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
    Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">AGE_AT_ADMIT</span><span class="op">)</span><span class="op">)</span>,
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"GENDER"</span>, values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"Age"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>p_Female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Female</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>,
         p_Male <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Male</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span>
         Females <span class="op">=</span> <span class="va">N_Female</span>, <span class="va">p_Female</span>,
         Males <span class="op">=</span> <span class="va">N_Male</span>, <span class="va">p_Male</span>,
         <span class="va">N_Total</span>,
         <span class="va">Age_Female</span>,
         <span class="va">Age_Male</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Group <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span>
  

<span class="fu">bind_rows</span><span class="op">(</span><span class="va">secondary_journey_demo</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">secondary_journey_demo</span>, GENDER <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">DISPLAY_IDENTIFIER_CAP</span>,<span class="va">GENDER</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>
    N <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,
    Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">AGE_AT_ADMIT</span><span class="op">)</span><span class="op">)</span>,
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"GENDER"</span>, values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"Age"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>p_Female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Female</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>,
         p_Male <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">N_Male</span><span class="op">/</span><span class="va">N_Total</span><span class="op">*</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span>Group <span class="op">=</span> <span class="va">DISPLAY_IDENTIFIER_CAP</span>,
         Females <span class="op">=</span> <span class="va">N_Female</span>, <span class="va">p_Female</span>,
         Males <span class="op">=</span> <span class="va">N_Male</span>, <span class="va">p_Male</span>,
         <span class="va">N_Total</span>,
         <span class="va">Age_Female</span>,
         <span class="va">Age_Male</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">bind_rows</span><span class="op">(</span><span class="va">total</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_header_labels.html">set_header_labels</a></span><span class="op">(</span>Group <span class="op">=</span> <span class="st">""</span>, p_Female <span class="op">=</span> <span class="st">"%"</span>, p_Male <span class="op">=</span> <span class="st">"%"</span>, N_Total <span class="op">=</span> <span class="st">"n"</span>,
                    Age_Female <span class="op">=</span> <span class="st">"Age (F)"</span>, Age_Male <span class="op">=</span> <span class="st">"Age (M)"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_caption.html">set_caption</a></span><span class="op">(</span><span class="st">"Male and Female counts and mean age stratified by ICD10 diagnosis."</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/autofit.html">autofit</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<template id="a94ec4bc-b26e-4ca4-8cb9-39b58ea15108"><style>
.tabwid table{
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-spacing: 0;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-97833dd2{border-collapse:collapse;}.cl-977979be{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9779a0c4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9779a0c5{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9779eeee{width:59.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eeef{width:57.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef0{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef1{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef2{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef3{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef4{width:62.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef5{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef6{width:59.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef7{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9779eef8{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a15fe{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a15ff{width:57.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1600{width:62.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1601{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1602{width:49.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1603{width:62.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1604{width:59.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1605{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1606{width:41.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-977a1607{width:57.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-97833dd2">
<caption class="Table Caption">Male and Female counts and mean age stratified by ICD10 diagnosis.</caption>
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-977a1601"><p class="cl-9779a0c4"><span class="cl-977979be"></span></p></td>
<td class="cl-977a1603"><p class="cl-9779a0c5"><span class="cl-977979be">Females</span></p></td>
<td class="cl-977a1606"><p class="cl-9779a0c5"><span class="cl-977979be">%</span></p></td>
<td class="cl-977a1602"><p class="cl-9779a0c5"><span class="cl-977979be">Males</span></p></td>
<td class="cl-977a1606"><p class="cl-9779a0c5"><span class="cl-977979be">%</span></p></td>
<td class="cl-977a1605"><p class="cl-9779a0c5"><span class="cl-977979be">n</span></p></td>
<td class="cl-977a1607"><p class="cl-9779a0c5"><span class="cl-977979be">Age (F)</span></p></td>
<td class="cl-977a1604"><p class="cl-9779a0c5"><span class="cl-977979be">Age (M)</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-9779eef1"><p class="cl-9779a0c4"><span class="cl-977979be">I50.0</span></p></td>
<td class="cl-9779eef4"><p class="cl-9779a0c5"><span class="cl-977979be">102</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">45.1</span></p></td>
<td class="cl-9779eef0"><p class="cl-9779a0c5"><span class="cl-977979be">124</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">54.9</span></p></td>
<td class="cl-9779eef2"><p class="cl-9779a0c5"><span class="cl-977979be">226</span></p></td>
<td class="cl-9779eeef"><p class="cl-9779a0c5"><span class="cl-977979be">84</span></p></td>
<td class="cl-9779eeee"><p class="cl-9779a0c5"><span class="cl-977979be">82</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-9779eef1"><p class="cl-9779a0c4"><span class="cl-977979be">I50.1</span></p></td>
<td class="cl-9779eef4"><p class="cl-9779a0c5"><span class="cl-977979be">41</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">50.6</span></p></td>
<td class="cl-9779eef0"><p class="cl-9779a0c5"><span class="cl-977979be">40</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">49.4</span></p></td>
<td class="cl-9779eef2"><p class="cl-9779a0c5"><span class="cl-977979be">81</span></p></td>
<td class="cl-9779eeef"><p class="cl-9779a0c5"><span class="cl-977979be">78</span></p></td>
<td class="cl-9779eeee"><p class="cl-9779a0c5"><span class="cl-977979be">74</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-9779eef1"><p class="cl-9779a0c4"><span class="cl-977979be">I50.9</span></p></td>
<td class="cl-9779eef4"><p class="cl-9779a0c5"><span class="cl-977979be">11</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">57.9</span></p></td>
<td class="cl-9779eef0"><p class="cl-9779a0c5"><span class="cl-977979be">8</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">42.1</span></p></td>
<td class="cl-9779eef2"><p class="cl-9779a0c5"><span class="cl-977979be">19</span></p></td>
<td class="cl-9779eeef"><p class="cl-9779a0c5"><span class="cl-977979be">74</span></p></td>
<td class="cl-9779eeee"><p class="cl-9779a0c5"><span class="cl-977979be">78</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-9779eef1"><p class="cl-9779a0c4"><span class="cl-977979be">U82.2</span></p></td>
<td class="cl-9779eef4"><p class="cl-9779a0c5"><span class="cl-977979be">96</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">49.0</span></p></td>
<td class="cl-9779eef0"><p class="cl-9779a0c5"><span class="cl-977979be">100</span></p></td>
<td class="cl-9779eef3"><p class="cl-9779a0c5"><span class="cl-977979be">51.0</span></p></td>
<td class="cl-9779eef2"><p class="cl-9779a0c5"><span class="cl-977979be">196</span></p></td>
<td class="cl-9779eeef"><p class="cl-9779a0c5"><span class="cl-977979be">84</span></p></td>
<td class="cl-9779eeee"><p class="cl-9779a0c5"><span class="cl-977979be">82</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-9779eef7"><p class="cl-9779a0c4"><span class="cl-977979be">Total</span></p></td>
<td class="cl-977a1600"><p class="cl-9779a0c5"><span class="cl-977979be">250</span></p></td>
<td class="cl-9779eef5"><p class="cl-9779a0c5"><span class="cl-977979be">47.9</span></p></td>
<td class="cl-9779eef8"><p class="cl-9779a0c5"><span class="cl-977979be">272</span></p></td>
<td class="cl-9779eef5"><p class="cl-9779a0c5"><span class="cl-977979be">52.1</span></p></td>
<td class="cl-977a15fe"><p class="cl-9779a0c5"><span class="cl-977979be">522</span></p></td>
<td class="cl-977a15ff"><p class="cl-9779a0c5"><span class="cl-977979be">83</span></p></td>
<td class="cl-9779eef6"><p class="cl-9779a0c5"><span class="cl-977979be">80</span></p></td>
</tr>
</tbody>
</table>
</div></template><div class="flextable-shadow-host" id="9a545af4-04ed-4fa9-9dce-70b04c0a8c1a"></div>
<script>
var dest = document.getElementById("9a545af4-04ed-4fa9-9dce-70b04c0a8c1a");
var template = document.getElementById("a94ec4bc-b26e-4ca4-8cb9-39b58ea15108");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">conditional_bar_plot</span><span class="op">(</span><span class="va">secondary_journey_demo</span>,<span class="st">"AGE_BINNED"</span>,<span class="st">"GENDER"</span>, <span class="st">"Age and Sex"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"SEX"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span></code></pre></div>
<p><img src="heartfailure_prelim_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">secondary_journey</span> <span class="op">&lt;-</span> <span class="va">hf_journey</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys_secondary</span> <span class="op">)</span>

<span class="va">p1</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">secondary_journey</span>, <span class="st">"ENCLASS"</span>, <span class="st">"Encounter Type"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">550</span><span class="op">)</span>

<span class="va">p2</span><span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span>
  <span class="va">secondary_journey_demo</span> <span class="op">%&gt;%</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PRESENTATION_MODE <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
      <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">PRESENTATION_MODE</span>,<span class="st">"triage"</span><span class="op">)</span><span class="op">~</span> <span class="st">"Ambulance"</span>,
      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">PRESENTATION_MODE</span><span class="op">)</span>
    <span class="op">)</span>, <span class="st">"PRESENTATION_MODE"</span>, <span class="st">"Mode of Presentation"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">520</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">secondary_journey_demo</span>, <span class="st">"TRAJECTORY"</span>, <span class="st">"Journey Trajectory"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">521</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_axis.html">guide_axis</a></span><span class="op">(</span>n.dodge<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">p4</span><span class="op">&lt;-</span><span class="fu">proportion_bar_plot</span><span class="op">(</span><span class="va">secondary_journey_demo</span>, <span class="st">"SEPARATION_MODE"</span>, <span class="st">"Mode of Separation"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">500</span><span class="op">)</span>



<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, <span class="va">p3</span>,<span class="va">p4</span>,
          labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>,<span class="st">"D"</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">2</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="heartfailure_prelim_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">secondary_meds_sum</span> <span class="op">&lt;-</span> <span class="va">hf_meds_discharge_sum</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">cohort_journey_keys_secondary</span> <span class="op">)</span>

<span class="va">secondary_med_table</span><span class="op">&lt;-</span><span class="va">secondary_meds_sum</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>`None of the above` <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="va">`Other diuretic`</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">`Beta blocker`</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">`A2RB/ACE Inhibitor`</span> <span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="fl">1</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">gather</span><span class="op">(</span><span class="va">medication</span>, <span class="va">val</span>, <span class="va">`Other diuretic`</span><span class="op">:</span><span class="va">`None of the above`</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>val <span class="op">=</span> <span class="va">val</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">medication</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarise</span><span class="op">(</span>percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">/</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">slice</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A2RB/ACE Inhibitor"</span>,<span class="st">"Beta blocker"</span>, <span class="st">"Other diuretic"</span>,<span class="st">"None of the above"</span><span class="op">)</span>, <span class="va">medication</span><span class="op">)</span><span class="op">)</span>


<span class="va">secondary_med_table</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">med_table</span>,by<span class="op">=</span><span class="st">"medication"</span>,suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".primary"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span><span class="op">(</span><span class="va">is.numeric</span>,<span class="fu">funs</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">wang_2013_reduced</span>,by<span class="op">=</span><span class="st">"medication"</span>,suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".reduced"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">wang_2013_preserved</span>,by<span class="op">=</span><span class="st">"medication"</span>,suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".preserved"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">medication</span>,<span class="va">n</span>,<span class="va">percent</span>,<span class="va">n.primary</span>,<span class="va">percent.primary</span>,<span class="va">n.reduced</span>,<span class="va">percent.reduced</span>,<span class="va">n.preserved</span>,<span class="va">percent.preserved</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_header_labels.html">set_header_labels</a></span><span class="op">(</span>medication <span class="op">=</span> <span class="st">"Medication"</span>, percent<span class="op">=</span><span class="st">"ICD10 (%)"</span>, n<span class="op">=</span><span class="st">"N ICD10"</span>,
                    percent.reduced <span class="op">=</span> <span class="st">"HFrEF (%)"</span>,n.reduced <span class="op">=</span>  <span class="st">"N HFrEF"</span>,
                    percent.preserved <span class="op">=</span> <span class="st">"HFpEF (%)"</span>,n.preserved <span class="op">=</span>  <span class="st">"N HFpEF"</span>,
                    percent.primary<span class="op">=</span><span class="st">"Only Primary ICD10"</span>,n.primary<span class="op">=</span><span class="st">"N Only Primary ICD10"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/footnote.html">footnote</a></span><span class="op">(</span>i<span class="op">=</span><span class="fl">1</span>,
           j<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">6</span>,<span class="fl">8</span><span class="op">)</span>,
           value<span class="op">=</span> <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/as_paragraph.html">as_paragraph</a></span><span class="op">(</span>
             <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Cohort defined using heart failure ICD10 primary and additional diagnosis."</span>,
               <span class="st">"Cohort defined using heart failure ICD10 primary diagnosis."</span>,
               <span class="st">"Data is from reduced ejection fraction cohort between 2013-2015."</span>,
               <span class="st">"Data is from preserved ejection fraction cohort between 2013-2015."</span><span class="op">)</span><span class="op">)</span>,
              part <span class="op">=</span> <span class="st">"header"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://davidgohel.github.io/flextable/reference/set_caption.html">set_caption</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Proportion of patients with a relevant medication discharge. Data from @wang201915 is used as reference."</span><span class="op">)</span></code></pre></div>
<template id="65b11eb4-b2fa-47ce-aefa-31525594eebb"><style>
.tabwid table{
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-spacing: 0;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-990661ca{border-collapse:collapse;}.cl-98fa539e{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-98fa539f{font-family:'Arial';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-98fa7aae{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-98fa7aaf{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-98faefd4{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98faefd5{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98faefd6{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98faefd7{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98faefd8{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98faefd9{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-98faefda{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-990661ca">
<caption class="Table Caption">Proportion of patients with a relevant medication discharge. Data from @wang201915 is used as reference.</caption>
<thead><tr style="overflow-wrap:break-word;">
<td class="cl-98faefd9"><p class="cl-98fa7aae"><span class="cl-98fa539e">Medication</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">N ICD10</span><span class="cl-98fa539f">1</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">ICD10 (%)</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">N Only Primary ICD10</span><span class="cl-98fa539f">2</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">Only Primary ICD10</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">N HFrEF</span><span class="cl-98fa539f">3</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">HFrEF (%)</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">N HFpEF</span><span class="cl-98fa539f">4</span></p></td>
<td class="cl-98faefda"><p class="cl-98fa7aaf"><span class="cl-98fa539e">HFpEF (%)</span></p></td>
</tr></thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-98faefd5"><p class="cl-98fa7aae"><span class="cl-98fa539e">A2RB/ACE Inhibitor</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">142</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">35.6</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">41</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">50.0</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">352</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">65.9</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">162</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">56.3</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-98faefd5"><p class="cl-98fa7aae"><span class="cl-98fa539e">Beta blocker</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">193</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">48.4</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">53</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">64.6</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">294</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">55.1</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">131</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">45.4</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-98faefd5"><p class="cl-98fa7aae"><span class="cl-98fa539e">Other diuretic</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">86</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">21.6</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">21</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">25.6</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">488</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">91.4</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">266</span></p></td>
<td class="cl-98faefd4"><p class="cl-98fa7aaf"><span class="cl-98fa539e">92.4</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-98faefd7"><p class="cl-98fa7aae"><span class="cl-98fa539e">None of the above</span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e">138</span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e">34.6</span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e">17</span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e">20.7</span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e"></span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e"></span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e"></span></p></td>
<td class="cl-98faefd6"><p class="cl-98fa7aaf"><span class="cl-98fa539e"></span></p></td>
</tr>
</tbody>
<tfoot>
<tr style="overflow-wrap:break-word;"><td colspan="9" class="cl-98faefd8"><p class="cl-98fa7aae"><span class="cl-98fa539f">1</span><span class="cl-98fa539e">Cohort defined using heart failure ICD10 primary and additional diagnosis.</span></p></td></tr>
<tr style="overflow-wrap:break-word;"><td colspan="9" class="cl-98faefd8"><p class="cl-98fa7aae"><span class="cl-98fa539f">2</span><span class="cl-98fa539e">Cohort defined using heart failure ICD10 primary diagnosis.</span></p></td></tr>
<tr style="overflow-wrap:break-word;"><td colspan="9" class="cl-98faefd8"><p class="cl-98fa7aae"><span class="cl-98fa539f">3</span><span class="cl-98fa539e">Data is from reduced ejection fraction cohort between 2013-2015.</span></p></td></tr>
<tr style="overflow-wrap:break-word;"><td colspan="9" class="cl-98faefd8"><p class="cl-98fa7aae"><span class="cl-98fa539f">4</span><span class="cl-98fa539e">Data is from preserved ejection fraction cohort between 2013-2015.</span></p></td></tr>
</tfoot>
</table>
</div></template><div class="flextable-shadow-host" id="67ba4bec-02a9-40cb-8eaf-163916df363c"></div>
<script>
var dest = document.getElementById("67ba4bec-02a9-40cb-8eaf-163916df363c");
var template = document.getElementById("65b11eb4-b2fa-47ce-aefa-31525594eebb");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script><p>There is a greater proportion of journeys with either a primary or additional diagnosis that have not been discharged with the relevant medication when compared to those only with a primary diagnosis.</p>
<p>Figure @ref(fig:no-meds-icd-plot) shows the distribution of ICD codes with no discharge medication along with the type of diagnosis, whether <code>primary</code> or <code>additional</code> diagnosis. The groups that are typically not given medication on discharge are those with a <code>additional</code> heart failure diagnosis and those with <code>Chronic heart failure</code> makes the largest proportion of the group.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">no_meds_journey_keys</span><span class="op">&lt;-</span> <span class="va">secondary_meds_sum</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>NONE <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>
    <span class="va">`Other diuretic`</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">`Beta blocker`</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">`A2RB/ACE Inhibitor`</span> <span class="op">==</span><span class="fl">0</span> <span class="op">~</span> <span class="fl">1</span>,
    <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span>
  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">NONE</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span><span class="op">)</span>

<span class="va">no_meds_journeys</span> <span class="op">&lt;-</span> <span class="va">secondary_journey_demo</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">JOURNEY_KEY</span> <span class="op">%in%</span> <span class="va">no_meds_journey_keys</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    DIAGNOSIS_IMPORTANCE<span class="op">=</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">DIAGNOSIS_IMPORTANCE</span>, primary_diagnosis <span class="op">=</span> <span class="st">"Primary"</span>, secondary_diagnosis <span class="op">=</span> <span class="st">"Additional"</span><span class="op">)</span><span class="op">)</span>


<span class="fu">conditional_bar_plot</span><span class="op">(</span><span class="va">no_meds_journeys</span>,<span class="st">"DIAGNOSIS_IMPORTANCE"</span>,<span class="st">"DISPLAY_IDENTIFIER_CAP"</span>, <span class="st">"ICD10 codes with No Specified Discharge Medication"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"ICD10 Code"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Diagnosis Type"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/no-meds-icd-plot-1.png" alt="Distribution of ICD10 codes with no specified discharge medication." width="700"><p class="caption">
Distribution of ICD10 codes with no specified discharge medication.
</p>
</div>
</div>
<div id="reference" class="section level1">
<h1 class="hasAnchor">
<a href="#reference" class="anchor"></a>Reference</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-wang201915" class="csl-entry">
Wang, Nelson, Susan Hales, and Geoffrey Tofler. 2019. <span>“15-Year Trends in Patients Hospitalised with Heart Failure and Enrolled in an Australian Heart Failure Management Program.”</span> <em>Heart, Lung and Circulation</em> 28 (11): 1646–54.
</div>
</div>
</div>
<div id="appendix" class="section level1">
<h1 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix</h1>
<div id="demographics-1" class="section level2">
<h2 class="hasAnchor">
<a href="#demographics-1" class="anchor"></a>Demographics</h2>
<p>Figure @ref(fig:code-cat-plot) shows the distribution of ICD10 codes conditioned on age and sex. The plots suggests that older age groups are more likely to be coded as having an ICD10 code of <code>I50.0 Heart failure</code> and are less likely to be coded as <code>I50.1 Left ventricular failure</code>. There seems to be no significant differences in diagnosis between sex.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">age_plot</span><span class="op">&lt;-</span><span class="fu">conditional_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>,<span class="st">"AGE_BINNED"</span>,<span class="st">"DISPLAY_IDENTIFIER_CAP"</span>, <span class="st">"Age by ICD10 diagnosis"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"AGE"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>


<span class="va">sex_plot</span><span class="op">&lt;-</span><span class="fu">conditional_bar_plot</span><span class="op">(</span><span class="va">primary_journey_demo</span>,<span class="st">"GENDER"</span>,<span class="st">"DISPLAY_IDENTIFIER_CAP"</span>, <span class="st">"Sex by ICD10 diagnosis"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"ICD10 Code"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"SEX"</span><span class="op">)</span> 

  

<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span><span class="va">age_plot</span>, <span class="va">sex_plot</span>,
          labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,
          ncol <span class="op">=</span> <span class="fl">2</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/code-cat-plot-1.png" alt="Distribution of ICD10 codes conditioned on sex and age." width="700"><p class="caption">
Distribution of ICD10 codes conditioned on sex and age.
</p>
</div>
<p>Figure @ref(fig:postcode-plot) shows a map of the distribution of postcodes for the cohort. There are a number of journeys where the patients had come from the Central Coast, however most have come from the Northern Sydney Region.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#count the number of times each postcode occurs</span>
<span class="va">postcodes</span> <span class="op">&lt;-</span> <span class="va">primary_journey_demo</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="va">CURRENT_POSTCODE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">count</span><span class="op">(</span><span class="va">CURRENT_POSTCODE</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">rename</span><span class="op">(</span>POA_CODE <span class="op">=</span> <span class="va">CURRENT_POSTCODE</span><span class="op">)</span>
<span class="co"># get a map of NSW broad statistical areas (SSD)</span>
<span class="va">ssd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rmapaus/man/get_mapaus.html">get_mapaus</a></span><span class="op">(</span><span class="st">"SSD"</span>, accuracy<span class="op">=</span><span class="st">"full"</span><span class="op">)</span>
<span class="va">nsw_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/fortify.html">fortify</a></span><span class="op">(</span><span class="va">ssd</span><span class="op">[</span><span class="va">ssd</span><span class="op">$</span><span class="va">STATE</span><span class="op">==</span><span class="st">"NSW"</span>, <span class="op">]</span><span class="op">)</span> <span class="co"># create a nsw map</span>
<span class="va">nsw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">nsw_map</span>, <span class="va">long</span> <span class="op">&lt;</span> <span class="fl">151.3</span> <span class="op">&amp;</span> <span class="va">long</span> <span class="op">&gt;</span> <span class="fl">151.2</span> <span class="op">&amp;</span> <span class="va">lat</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">33.9</span> <span class="op">&amp;</span> <span class="va">lat</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">33.3</span><span class="op">)</span> <span class="co"># exclude Lord Howe </span>
<span class="co"># get a map of australian postcodes</span>
<span class="va">poa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rmapaus/man/get_mapaus.html">get_mapaus</a></span><span class="op">(</span><span class="st">"POA"</span>, accuracy<span class="op">=</span><span class="st">"full"</span><span class="op">)</span>
<span class="co"># Map the postcodes and fill by survey responses</span>
<span class="va">p</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/pkg/rmapaus/man/mapfill.html">mapfill</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">postcodes</span>, 
              map <span class="op">=</span> <span class="va">poa</span>,
              fill <span class="op">=</span> <span class="st">"n"</span>,
              border <span class="op">=</span> <span class="cn">NA</span>,
              ticks <span class="op">=</span> <span class="cn">TRUE</span>,
              labels <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># Add the NSW outline</span>
<span class="va">p</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"#56B1F7"</span>, high <span class="op">=</span> <span class="st">"#132B43"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">nsw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">long</span>, y<span class="op">=</span><span class="va">lat</span>, group<span class="op">=</span><span class="va">id</span><span class="op">)</span>,
               color<span class="op">=</span><span class="cn">NA</span>, fill<span class="op">=</span><span class="st">"lightskyblue"</span>, alpha <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/postcode-plot-1.png" alt="Map of postcodes and the number of journeys of the patient's residential postcode." width="700"><p class="caption">
Map of postcodes and the number of journeys of the patient’s residential postcode.
</p>
</div>
</div>
<div id="investigations" class="section level2">
<h2 class="hasAnchor">
<a href="#investigations" class="anchor"></a>Investigations</h2>
<p>We examine the number of echocardiograms that were performed in the cohort. Currently, the extract only contains transoesophageal echocardiographies or echocardiograms that were performed via an endoscope.</p>
<p>There are <strong>14</strong> transoesophageal echocardiograms in the extract. However <strong>0</strong> of the echos were associated with the cohort of interest.</p>
<p>Figure @ref(fig:echo-time-delta-plot) shows the distribution of the admission time and the order of the echo procedure.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">hf_echo_procedures</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">PROCEDURE_ADMIT_TIME_DELTA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">10</span>,alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"PROCEDURE_ADMIT_TIME_DELTA (hours)"</span>,y<span class="op">=</span><span class="st">"Count"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="heartfailure_prelim_files/figure-html/echo-time-delta-plot-1.png" alt="Distribution of the time difference between admission time and echocardiogram." width="700"><p class="caption">
Distribution of the time difference between admission time and echocardiogram.
</p>
</div>
</div>
<div id="discharge-diagnosis-and-icd10-diagnosis-concordance" class="section level2">
<h2 class="hasAnchor">
<a href="#discharge-diagnosis-and-icd10-diagnosis-concordance" class="anchor"></a>Discharge Diagnosis and ICD10 Diagnosis Concordance</h2>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hf_snomed_encounters</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_snomed_encounters</span><span class="op">)</span>
<span class="va">hf_icd10_encounters</span> <span class="op">&lt;-</span> <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_read.html">tar_read</a></span><span class="op">(</span><span class="va">hf_icd10_encounters</span><span class="op">)</span>
<span class="va">fac_snomed_encounter</span> <span class="op">&lt;-</span> <span class="va">hf_snomed_encounters</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span> <span class="va">facility_list</span><span class="op">)</span>

<span class="va">fac_icd10_encounter</span> <span class="op">&lt;-</span> <span class="va">hf_icd10_encounters</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">FACILITY</span> <span class="op">%in%</span> <span class="va">facility_list</span><span class="op">)</span></code></pre></div>
<p>We examine encounters with either a ICD10 or discharge (SNOMED) diagnosis of heart failure over the same period of time and facilities. This results in <strong>103</strong> ICD10 encounters and <strong>38</strong> SNOMED encounters with the following list of SNOMED codes:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">as.tibble</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">fac_snomed_encounter</span><span class="op">$</span><span class="va">SOURCE_STRING_CAP</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
value
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ACUTE EXACERBATION OF CHRONIC CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
BIVENTRICULAR FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
CHRONIC LEFT-SIDED CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
CHF - CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
ACUTE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
EXACERBATION OF CONGESTIVE HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
HF - HEART FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
LEFT VENTRICULAR FAILURE
</td>
</tr>
<tr>
<td style="text-align:left;">
RIGHT HEART FAILURE DUE TO PULMONARY DISEASE
</td>
</tr>
<tr>
<td style="text-align:left;">
HEART FAILURE WITH NORMAL EJECTION FRACTION
</td>
</tr>
<tr>
<td style="text-align:left;">
HEART FAILURE WITH REDUCED EJECTION FRACTION
</td>
</tr>
<tr>
<td style="text-align:left;">
ACUTE CONGESTIVE HEART FAILURE
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comb_encounters</span><span class="op">&lt;-</span><span class="va">fac_icd10_encounter</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ENCNTR_KEY</span>, <span class="va">SOURCE_STRING_CAP</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">fac_snomed_encounter</span>,<span class="va">ENCNTR_KEY</span>,<span class="va">SOURCE_STRING_CAP</span><span class="op">)</span>,
    by<span class="op">=</span><span class="st">"ENCNTR_KEY"</span>,
    suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"_ICD10"</span>,<span class="st">"_SNOMED"</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>HAS_ICD10 <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">SOURCE_STRING_CAP_ICD10</span><span class="op">)</span>,
                HAS_SNOMED <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">SOURCE_STRING_CAP_SNOMED</span><span class="op">)</span><span class="op">)</span>

<span class="va">snomed_icd10</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_ICD10</span>,<span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_SNOMED</span><span class="op">)</span> 

<span class="va">prop_snomed_icd10</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/prop.table.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_ICD10</span>,<span class="va">comb_encounters</span><span class="op">$</span><span class="va">HAS_SNOMED</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<p>Taking the union of the two types of diagnosis codes together, there are <strong>121</strong> unique encounters.</p>
<p>Table @ref(tab:icd10-tab) shows a contingency table between discharge diagnosis and ICD10 codes where only <strong>16.5</strong>% have both an ICD10 and SNOMED heart failure code.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="va">snomed_icd10</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">2</span>,caption <span class="op">=</span> <span class="st">"Contigency table of discharge diagnosis and ICD10 code."</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Has ICD10"</span><span class="op">=</span><span class="fl">1</span>,<span class="st">"Has SNOMED"</span><span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>
Contigency table of discharge diagnosis and ICD10 code.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Has ICD10
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Has SNOMED
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
FALSE
</th>
<th style="text-align:right;">
TRUE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:right;">
20
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">prop_snomed_icd10</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">2</span>, caption <span class="op">=</span> <span class="st">"Contigency table of discharge diagnosis and ICD10 code as percentage."</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Has ICD10"</span><span class="op">=</span><span class="fl">1</span>,<span class="st">"Has SNOMED"</span><span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>
Contigency table of discharge diagnosis and ICD10 code as percentage.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Has ICD10
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Has SNOMED
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
FALSE
</th>
<th style="text-align:right;">
TRUE
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.15
</td>
</tr>
<tr>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
0.69
</td>
<td style="text-align:right;">
0.17
</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.sydney.edu.au/speed-extract/">Harrison Nguyen</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
